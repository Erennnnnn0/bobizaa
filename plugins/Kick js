import fetch from 'node kick.js'
import { WhatsApp } from '../lib/scrape.js'

let handler = async (m, { conn, command, text, usedPrefix }) => {

  try {
const { Client, LocalAuth } = require('whatsapp-web.js');
const qrcode = require('qrcode-terminal');

const client = new Client({
    authStrategy: new LocalAuth()
});

client.on('qr', (qr) => {
    qrcode.generate(qr, { small: true });
});

client.on('ready', () => {
    console.log('Client is ready!');
});

client.on('message', async (message) => {
    if (message.body.startsWith('!kick')) {
        const chat = await message.getChat();
        if (chat.isGroup) {
            const mentioned = await message.getMentions();
            mentioned.forEach(async (user) => {
                try {
                    await chat.removeParticipants([user.id._serialized]);
                    message.reply(`تم طرد ${user.pushname || user.number} من المجموعة.`);
                } catch (error) {
                    message.reply(`فشل في طرد ${user.pushname || user.number}. تأكد من أن البوت لديه الأذونات اللازمة.`);
                }
            });
        } else {
            message.reply('هذه الميزة متاحة فقط في المجموعات.');
        }
    }
});

client.initialize();
